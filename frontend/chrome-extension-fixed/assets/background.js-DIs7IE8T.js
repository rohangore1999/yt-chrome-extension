chrome.action.onClicked.addListener(async e=>{try{try{await chrome.tabs.sendMessage(e.id,{action:"ping"}),console.log("Content script already present, sending toggle message"),chrome.tabs.sendMessage(e.id,{action:"togglePopup"})}catch{console.log("Content script not found, injecting..."),await chrome.scripting.executeScript({target:{tabId:e.id},files:["src/content.js"]}),setTimeout(()=>{chrome.tabs.sendMessage(e.id,{action:"togglePopup"})},100)}}catch(o){console.error("Error in extension click handler:",o)}});chrome.runtime.onMessage.addListener((e,o,n)=>{e.action,n({success:!0})});
